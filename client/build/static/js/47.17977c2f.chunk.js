(this.webpackJsonpwalleyworks=this.webpackJsonpwalleyworks||[]).push([[47],{1321:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(2),r=a(26),c=a(75),i=a.n(c),s=a(123),o=a(312),l=a(1221),u=a(38),d=a(1339),b=a(0),j=["links","activeLast"];function p(e){var t=e.links,a=e.activeLast,c=void 0!==a&&a,i=Object(r.a)(e,j),l=t[t.length-1].name,u=t.map((function(e){return Object(b.jsx)(m,{link:e},e.name)})),p=t.map((function(e){return Object(b.jsx)("div",{children:e.name!==l?Object(b.jsx)(m,{link:e}):Object(b.jsx)(o.a,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:l})},e.name)}));return Object(b.jsx)(d.a,Object(n.a)(Object(n.a)({separator:Object(b.jsx)(s.a,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},i),{},{children:c?u:p}))}function m(e){var t=e.link,a=t.href,n=t.name,r=t.icon;return Object(b.jsxs)(l.a,{variant:"body2",component:u.b,to:a||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[r&&Object(b.jsx)(s.a,{sx:{mr:1,"& svg":{width:20,height:20}},children:r}),n]},n)}var h=["links","action","heading","moreLink","sx"];function g(e){var t=e.links,a=e.action,c=e.heading,u=e.moreLink,d=void 0===u?[]:u,j=e.sx,m=Object(r.a)(e,h);return Object(b.jsxs)(s.a,{sx:Object(n.a)({mb:5},j),children:[Object(b.jsxs)(s.a,{sx:{display:"flex",alignItems:"center"},children:[Object(b.jsxs)(s.a,{sx:{flexGrow:1},children:[Object(b.jsx)(o.a,{variant:"h4",gutterBottom:!0,children:c}),Object(b.jsx)(p,Object(n.a)({links:t},m))]}),a&&Object(b.jsx)(s.a,{sx:{flexShrink:0},children:a})]}),Object(b.jsx)(s.a,{sx:{mt:2},children:i()(d)?Object(b.jsx)(l.a,{href:d,target:"_blank",rel:"noopener",variant:"body2",children:d}):d.map((function(e){return Object(b.jsx)(l.a,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)}))})]})}},1396:function(e,t,a){"use strict";var n=a(29),r=a(18),c=a.n(r),i=a(19),s=a(444),o=a(434),l=(a(44),a(32)),u=function(){var e=Object(n.a)(c.a.mark((function e(t,a){var n,r,u,d,b,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.get("/api/product/categories");case 3:return n=e.sent,r=n.data.categories,Object(i.a)(Object(s.b)(r)),e.next=8,l.a.get("/api/product/sizes");case 8:return n=e.sent,u=n.data.sizes,Object(i.a)(Object(s.c)(u)),e.next=13,l.a.get("/api/product/tags");case 13:if(n=e.sent,d=n.data.tags,Object(i.a)(Object(s.d)(d)),!t){e.next=27;break}return e.next=19,l.a.post("/api/product/userCategories");case 19:return n=e.sent,b=n.data.userCategories,Object(i.a)(Object(s.e)(b)),e.next=24,l.a.get("/api/account/general");case 24:n=e.sent,j=n.data.account,Object(i.a)(Object(o.d)(j));case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),console.log(e.t0);case 32:a();case 33:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t,a){return e.apply(this,arguments)}}();t.a=u},1508:function(e,t,a){"use strict";a.d(t,"a",(function(){return q}));var n=a(29),r=a(13),c=a(2),i=a(18),s=a.n(i),o=a(236),l=a(237),u=a(36),d=a(1),b=a(31),j=a(422),p=a(6),m=a(1292),h=a(312),g=a(1294),x=a(1315),O=a(1203),v=a(2102),f=a(2025),k=a(1312),y=a(1307),w=a(24),I=a(202),S=a(19),P=a(32),C=a(1284),z=a(52),L=a(123),R=a(64),D=(a(1396),a(0)),U=Object(p.a)("div")((function(e){return{right:0,bottom:0,zIndex:99999,width:"100%",height:"100%",position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.theme.palette.background.default}}));function E(){return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(U,{children:[Object(D.jsx)(C.a.div,{initial:{rotateY:0},animate:{rotateY:360},transition:{duration:2,ease:"easeInOut",repeatDelay:1,repeat:1/0},children:Object(D.jsx)(R.a,{disabledLink:!0,sx:{width:64,height:64}})}),Object(D.jsx)(L.a,{component:C.a.div,animate:{scale:[1.2,1,1,1.2,1.2],rotate:[270,0,0,270,270],opacity:[.25,1,1,1,.25],borderRadius:["25%","25%","50%","50%","25%"]},transition:{ease:"linear",duration:3.2,repeat:1/0},sx:{width:100,height:100,borderRadius:"25%",position:"absolute",border:function(e){return"solid 3px ".concat(Object(z.a)(e.palette.primary.dark,.24))}}}),Object(D.jsx)(L.a,{component:C.a.div,animate:{scale:[1,1.2,1.2,1,1],rotate:[0,270,270,0,0],opacity:[1,.25,.25,.25,1],borderRadius:["25%","25%","50%","50%","25%"]},transition:{ease:"linear",duration:3.2,repeat:1/0},sx:{width:120,height:120,borderRadius:"25%",position:"absolute",border:function(e){return"solid 8px ".concat(Object(z.a)(e.palette.primary.dark,.24))}}}),"uploading data...."]})})}var F=["men","women","kids"],T=Object(p.a)(h.a)((function(e){var t=e.theme;return Object(c.a)(Object(c.a)({},t.typography.subtitle2),{},{color:t.palette.text.secondary,marginBottom:t.spacing(1)})}));function q(e){var t=e.isEdit,a=e.currentProduct,i=Object(S.e)((function(e){return e.category})),p=i.categories,h=i.userCategories,C=i.tags,z=i.sizes,L=Object(u.g)(),R=Object(l.b)().enqueueSnackbar,U=["image/jpeg","image/jpg","image/png"],q=o.e().shape({name:o.g().required("Name is required"),description:o.g().required("Description is required"),subImages:o.a().min(1,"Sub images is required"),coverImage:o.c().test("fileSize","No file selected or file too large",(function(e){return null===e||e&&e.size<10485760})).test("fileFormat","Unsupported file type",(function(e){return null===e||e&&e&&U.includes(e.type)})),salePrice:o.d().moreThan(0,"Price should not be $0.00"),price:o.d().moreThan(0,"Price should not be $0.00")}),A=o.e().shape({salePrice:o.d().moreThan(0,"Price should not be $0.00"),price:o.d().moreThan(0,"Price should not be $0.00")}),N=Object(d.useMemo)((function(){return{video:(null===a||void 0===a?void 0:a.video)||"",name:(null===a||void 0===a?void 0:a.name)||"",description:(null===a||void 0===a?void 0:a.description)||"",coverImage:(null===a||void 0===a?void 0:a.coverImage)||"",subImages:(null===a||void 0===a?void 0:a.subImages)||[],code:(null===a||void 0===a?void 0:a.code)||"",sku:(null===a||void 0===a?void 0:a.sku)||"",price:(null===a||void 0===a?void 0:a.price)||0,priceSale:(null===a||void 0===a?void 0:a.priceSale)||0,tags:(null===a||void 0===a?void 0:a.tags)||[],inStock:(null===a||void 0===a?void 0:a.inStock)||!0,taxes:(null===a||void 0===a?void 0:a.taxes)||!0,gender:(null===a||void 0===a?void 0:a.gender)||F[2],category:(null===a||void 0===a?void 0:a.category)||"",weight:(null===a||void 0===a?void 0:a.weight)||0,sizes:(null===a||void 0===a?void 0:a.sizes)||[],colors:(null===a||void 0===a?void 0:a.colors)||!0,userCategory:(null===a||void 0===a?void 0:a.userCategory)||"",state:"active"===(null===a||void 0===a?void 0:a.state)||!0}}),[a]),$=Object(b.f)({resolver:Object(j.a)(t?A:q),defaultValues:N}),_=($.reset,$.watch),V=$.control,W=$.setValue,H=$.getValues,B=$.handleSubmit,G=($.formState.isSubmitting,_()),J=Object(d.useState)(!1),K=Object(r.a)(J,2),M=K[0],Y=K[1],Q=function(){var e=Object(n.a)(s.a.mark((function e(){var n,r,c,i,o,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y(!0),n=new FormData,r=new FormData,c=new FormData,!1,i=!1,o=!1,G.coverImage instanceof Object&&(r.append("coverImage",G.coverImage),i=!0),G.video instanceof Object&&(n.append("video",G.video),!0),G.subImages[0]instanceof Object&&(G.subImages.forEach((function(e){c.append("subImages",e)})),o=!0),c.append("subImages",G.subImages),G.video="",G.coverImage="",G.subImages=[],t&&(G._id=a._id),e.next=18,P.a.post("/api/product/upload",G);case 18:if(l=e.sent,!(u=l.data.product)){e.next=31;break}if(!i){e.next=26;break}return r.append("product",u),e.next=25,P.a.post("/api/product/upload/coverImage",r);case 25:l=e.sent;case 26:if(!o){e.next=31;break}return c.append("product",u),e.next=30,P.a.post("/api/product/upload/subImages",c);case 30:l=e.sent;case 31:Y(!1),R(t?"Update progress is successed!":"Create progress is successed!"),L(w.a.profile.product),e.next=40;break;case 36:e.prev=36,e.t0=e.catch(0),console.error(e.t0),Y(!1);case 40:case"end":return e.stop()}}),e,null,[[0,36]])})));return function(){return e.apply(this,arguments)}}(),X=Object(d.useCallback)((function(e){var t=e[0];t&&W("coverImage",Object.assign(t,{preview:URL.createObjectURL(t)}))}),[W]),Z=Object(d.useCallback)((function(e){W("subImages",e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[W]),ee=Object(d.useState)([{group:"",classify:[]}]),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],re=[];return Object(d.useEffect)((function(){var e={group:""};p.forEach((function(t,a){t.group!==e.group?(e=t,re.push({group:t.group,classify:[{value:t.classify,key:t.key}]})):re.forEach((function(e,a){e.group===t.group&&e.classify.push({value:t.classify,key:t.key})}))})),re.length>0&&ne(re)}),[]),Object(D.jsxs)(D.Fragment,{children:[M&&Object(D.jsx)(E,{}),Object(D.jsx)(I.a,{methods:$,onSubmit:B(Q),children:Object(D.jsxs)(g.a,{container:!0,spacing:3,children:[Object(D.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(D.jsxs)(x.a,{sx:{p:3},children:[Object(D.jsxs)(O.a,{spacing:3,children:[Object(D.jsx)(I.h,{name:"name",label:"Product Name"}),Object(D.jsxs)("div",{children:[Object(D.jsx)(T,{children:"Description"}),Object(D.jsx)(I.c,{simple:!0,name:"description"})]})]}),Object(D.jsxs)(O.a,{spacing:3,children:[Object(D.jsxs)("div",{children:[Object(D.jsx)(T,{children:"Description Video"}),Object(D.jsx)(I.l,{name:"video",showPreview:!0,accept:"video/*",maxSize:3145728,onDrop:X})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)(T,{children:"Cover Image"}),Object(D.jsx)(I.l,{name:"coverImage",showPreview:!0,accept:"image/*",maxSize:3145728,onDrop:X})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)(T,{children:"Sub Images"}),Object(D.jsx)(I.k,{name:"subImages",showPreview:!0,accept:"image/*",maxSize:3145728,onDrop:Z,onRemove:function(e){var t,a=null===(t=G.subImages)||void 0===t?void 0:t.filter((function(t){return t!==e}));W("subImages",a)},onRemoveAll:function(){W("subImages",[])}})]})]})]})}),Object(D.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(D.jsxs)(O.a,{spacing:3,children:[Object(D.jsxs)(x.a,{sx:{p:3},children:[Object(D.jsx)(I.g,{name:"inStock",label:"In stock"}),Object(D.jsxs)(O.a,{spacing:3,mt:2,children:[Object(D.jsx)(I.h,{name:"code",label:"Product Code"}),Object(D.jsx)(I.h,{name:"sku",label:"Product SKU"}),Object(D.jsxs)("div",{children:[Object(D.jsx)(T,{children:"Gender"}),Object(D.jsx)(I.e,{name:"gender",options:F,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),Object(D.jsx)(I.f,{name:"category",label:"HHU Category",children:ae.length>0&&ae.map((function(e){return Object(D.jsx)("optgroup",{label:e.group,children:e.classify.map((function(e){return Object(D.jsx)("option",{value:e.key,children:e.value},e.key)}))},e.group)}))}),Object(D.jsxs)(I.f,{name:"userCategory",label:"User Store Category",children:[Object(D.jsx)("option",{value:"",children:"\xa0"},""),h.length>0&&h.map((function(e){return Object(D.jsx)("option",{value:e.classify,children:e.classify},e.key)}))]}),Object(D.jsx)(b.a,{name:"tags",control:V,render:function(e){var t=e.field;return Object(D.jsx)(v.a,Object(c.a)(Object(c.a)({},t),{},{multiple:!0,freeSolo:!0,onChange:function(e,a){return t.onChange(a)},options:C.map((function(e){return e.name})),renderTags:function(e,t){return e.map((function(e,a){return Object(d.createElement)(f.a,Object(c.a)(Object(c.a)({},t({index:a})),{},{key:e,size:"small",label:e}))}))},renderInput:function(e){return Object(D.jsx)(k.a,Object(c.a)({label:"Tags"},e))}}))}})]})]}),Object(D.jsxs)(x.a,{sx:{p:3},children:[Object(D.jsxs)(O.a,{spacing:3,mb:2,children:[Object(D.jsx)(I.h,{name:"price",label:"Regular Price",placeholder:"0.00",value:0===H("price")?"":H("price"),onChange:function(e){return W("price",Number(e.target.value))},InputLabelProps:{shrink:!0},InputProps:{startAdornment:Object(D.jsx)(y.a,{position:"start",children:"$"}),type:"number"}}),Object(D.jsx)(I.h,{name:"priceSale",label:"Sale Price",placeholder:"0.00",value:0===H("priceSale")?"":H("priceSale"),onChange:function(e){return W("priceSale",Number(e.target.value))},InputLabelProps:{shrink:!0},InputProps:{startAdornment:Object(D.jsx)(y.a,{position:"start",children:"$"}),type:"number"}})]}),Object(D.jsx)(I.g,{name:"taxes",label:"Price includes taxes"})]}),Object(D.jsx)(x.a,{sx:{p:3},children:Object(D.jsxs)(O.a,{spacing:3,mb:2,children:[Object(D.jsx)(I.g,{name:"state",label:"Active this Product"}),Object(D.jsx)(b.a,{name:"sizes",control:V,render:function(e){var t=e.field;return Object(D.jsx)(v.a,Object(c.a)(Object(c.a)({},t),{},{multiple:!0,freeSolo:!0,onChange:function(e,a){return t.onChange(a)},options:z.map((function(e){return e.name})),renderTags:function(e,t){return e.map((function(e,a){return Object(d.createElement)(f.a,Object(c.a)(Object(c.a)({},t({index:a})),{},{key:e,size:"small",label:e}))}))},renderInput:function(e){return Object(D.jsx)(k.a,Object(c.a)({label:"Size Of Product"},e))}}))}}),Object(D.jsx)(I.h,{name:"weight",label:"Weight of Product",placeholder:"0.00",value:0===H("weight")?"":H("weight"),onChange:function(e){return W("weight",Number(e.target.value))},InputLabelProps:{shrink:!0},InputProps:{startAdornment:Object(D.jsx)(y.a,{position:"start",children:"Kg"}),type:"number"}}),Object(D.jsx)(I.g,{name:"colors",label:"Product contains other colors"})]})}),Object(D.jsx)(m.a,{type:"submit",variant:"contained",size:"large",loading:M,children:t?"Save Changes":"Create Product"})]})})]})})]})}},2059:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return b}));a(1);var n=a(36),r=a(1298),c=a(19),i=(a(426),a(24)),s=a(63),o=a(420),l=a(1321),u=a(1508),d=a(0);function b(){var e=Object(s.a)().themeStretch,t=(Object(c.d)(),Object(n.f)().pathname,Object(n.h)().id),a=Object(c.e)((function(e){return e.product})).products,b=t&&a.find((function(e){return e._id===t})),j=!!(t&&b&&b._id);return Object(d.jsx)(o.a,{title:"Ecommerce: Create a new product",children:Object(d.jsxs)(r.a,{maxWidth:!e&&"xl",children:[Object(d.jsx)(l.a,{sx:{mb:0},heading:"Account",links:[{name:"Profile",href:i.a.profile.account},{name:"Product List",href:i.a.profile.product},{name:"Product Upload"}]}),Object(d.jsx)(u.a,{isEdit:j,currentProduct:b})]})})}}}]);
//# sourceMappingURL=47.17977c2f.chunk.js.map