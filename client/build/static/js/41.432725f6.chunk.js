(this.webpackJsonpwalleyworks=this.webpackJsonpwalleyworks||[]).push([[41],{1321:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(2),r=n(26),c=n(75),i=n.n(c),s=n(123),o=n(312),u=n(1221),l=n(38),d=n(1339),b=n(0),j=["links","activeLast"];function p(e){var t=e.links,n=e.activeLast,c=void 0!==n&&n,i=Object(r.a)(e,j),u=t[t.length-1].name,l=t.map((function(e){return Object(b.jsx)(m,{link:e},e.name)})),p=t.map((function(e){return Object(b.jsx)("div",{children:e.name!==u?Object(b.jsx)(m,{link:e}):Object(b.jsx)(o.a,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:u})},e.name)}));return Object(b.jsx)(d.a,Object(a.a)(Object(a.a)({separator:Object(b.jsx)(s.a,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},i),{},{children:c?l:p}))}function m(e){var t=e.link,n=t.href,a=t.name,r=t.icon;return Object(b.jsxs)(u.a,{variant:"body2",component:l.b,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[r&&Object(b.jsx)(s.a,{sx:{mr:1,"& svg":{width:20,height:20}},children:r}),a]},a)}var h=["links","action","heading","moreLink","sx"];function g(e){var t=e.links,n=e.action,c=e.heading,l=e.moreLink,d=void 0===l?[]:l,j=e.sx,m=Object(r.a)(e,h);return Object(b.jsxs)(s.a,{sx:Object(a.a)({mb:5},j),children:[Object(b.jsxs)(s.a,{sx:{display:"flex",alignItems:"center"},children:[Object(b.jsxs)(s.a,{sx:{flexGrow:1},children:[Object(b.jsx)(o.a,{variant:"h4",gutterBottom:!0,children:c}),Object(b.jsx)(p,Object(a.a)({links:t},m))]}),n&&Object(b.jsx)(s.a,{sx:{flexShrink:0},children:n})]}),Object(b.jsx)(s.a,{sx:{mt:2},children:i()(d)?Object(b.jsx)(u.a,{href:d,target:"_blank",rel:"noopener",variant:"body2",children:d}):d.map((function(e){return Object(b.jsx)(u.a,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)}))})]})}},1396:function(e,t,n){"use strict";var a=n(29),r=n(18),c=n.n(r),i=n(19),s=n(444),o=n(434),u=(n(44),n(32)),l=function(){var e=Object(a.a)(c.a.mark((function e(t,n){var a,r,l,d,b,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/api/product/categories");case 3:return a=e.sent,r=a.data.categories,Object(i.a)(Object(s.b)(r)),e.next=8,u.a.get("/api/product/sizes");case 8:return a=e.sent,l=a.data.sizes,Object(i.a)(Object(s.c)(l)),e.next=13,u.a.get("/api/product/tags");case 13:if(a=e.sent,d=a.data.tags,Object(i.a)(Object(s.d)(d)),!t){e.next=27;break}return e.next=19,u.a.post("/api/product/userCategories");case 19:return a=e.sent,b=a.data.userCategories,Object(i.a)(Object(s.e)(b)),e.next=24,u.a.get("/api/account/general");case 24:a=e.sent,j=a.data.account,Object(i.a)(Object(o.d)(j));case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),console.log(e.t0);case 32:n();case 33:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t,n){return e.apply(this,arguments)}}();t.a=l},1433:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(10),r=n(427);function c(e,t){return void 0===t&&(t={}),function(e,t){return void 0===t&&(t={}),Object(r.a)(e,Object(a.a)({delimiter:"."},t))}(e,Object(a.a)({delimiter:"-"},t))}},1508:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var a=n(29),r=n(13),c=n(2),i=n(18),s=n.n(i),o=n(236),u=n(237),l=n(36),d=n(1),b=n(31),j=n(422),p=n(6),m=n(1292),h=n(312),g=n(1294),O=n(1315),x=n(1203),v=n(2102),f=n(2025),k=n(1312),y=n(1307),w=n(24),I=n(202),S=n(19),C=n(32),P=n(1284),z=n(52),L=n(123),E=n(64),R=(n(1396),n(0)),D=Object(p.a)("div")((function(e){return{right:0,bottom:0,zIndex:99999,width:"100%",height:"100%",position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.theme.palette.background.default}}));function U(){return Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(D,{children:[Object(R.jsx)(P.a.div,{initial:{rotateY:0},animate:{rotateY:360},transition:{duration:2,ease:"easeInOut",repeatDelay:1,repeat:1/0},children:Object(R.jsx)(E.a,{disabledLink:!0,sx:{width:64,height:64}})}),Object(R.jsx)(L.a,{component:P.a.div,animate:{scale:[1.2,1,1,1.2,1.2],rotate:[270,0,0,270,270],opacity:[.25,1,1,1,.25],borderRadius:["25%","25%","50%","50%","25%"]},transition:{ease:"linear",duration:3.2,repeat:1/0},sx:{width:100,height:100,borderRadius:"25%",position:"absolute",border:function(e){return"solid 3px ".concat(Object(z.a)(e.palette.primary.dark,.24))}}}),Object(R.jsx)(L.a,{component:P.a.div,animate:{scale:[1,1.2,1.2,1,1],rotate:[0,270,270,0,0],opacity:[1,.25,.25,.25,1],borderRadius:["25%","25%","50%","50%","25%"]},transition:{ease:"linear",duration:3.2,repeat:1/0},sx:{width:120,height:120,borderRadius:"25%",position:"absolute",border:function(e){return"solid 8px ".concat(Object(z.a)(e.palette.primary.dark,.24))}}}),"uploading data...."]})})}var F=["men","women","kids"],N=Object(p.a)(h.a)((function(e){var t=e.theme;return Object(c.a)(Object(c.a)({},t.typography.subtitle2),{},{color:t.palette.text.secondary,marginBottom:t.spacing(1)})}));function T(e){var t=e.isEdit,n=e.currentProduct,i=Object(S.e)((function(e){return e.category})),p=i.categories,h=i.userCategories,P=i.tags,z=i.sizes,L=Object(l.g)(),E=Object(u.b)().enqueueSnackbar,D=["image/jpeg","image/jpg","image/png"],T=o.e().shape({name:o.g().required("Name is required"),description:o.g().required("Description is required"),subImages:o.a().min(1,"Sub images is required"),coverImage:o.c().test("fileSize","No file selected or file too large",(function(e){return null===e||e&&e.size<10485760})).test("fileFormat","Unsupported file type",(function(e){return null===e||e&&e&&D.includes(e.type)})),salePrice:o.d().moreThan(0,"Price should not be $0.00"),price:o.d().moreThan(0,"Price should not be $0.00")}),q=o.e().shape({salePrice:o.d().moreThan(0,"Price should not be $0.00"),price:o.d().moreThan(0,"Price should not be $0.00")}),$=Object(d.useMemo)((function(){return{video:(null===n||void 0===n?void 0:n.video)||"",name:(null===n||void 0===n?void 0:n.name)||"",description:(null===n||void 0===n?void 0:n.description)||"",coverImage:(null===n||void 0===n?void 0:n.coverImage)||"",subImages:(null===n||void 0===n?void 0:n.subImages)||[],code:(null===n||void 0===n?void 0:n.code)||"",sku:(null===n||void 0===n?void 0:n.sku)||"",price:(null===n||void 0===n?void 0:n.price)||0,priceSale:(null===n||void 0===n?void 0:n.priceSale)||0,tags:(null===n||void 0===n?void 0:n.tags)||[],inStock:(null===n||void 0===n?void 0:n.inStock)||!0,taxes:(null===n||void 0===n?void 0:n.taxes)||!0,gender:(null===n||void 0===n?void 0:n.gender)||F[2],category:(null===n||void 0===n?void 0:n.category)||"",weight:(null===n||void 0===n?void 0:n.weight)||0,sizes:(null===n||void 0===n?void 0:n.sizes)||[],colors:(null===n||void 0===n?void 0:n.colors)||!0,userCategory:(null===n||void 0===n?void 0:n.userCategory)||"",state:"active"===(null===n||void 0===n?void 0:n.state)||!0}}),[n]),A=Object(b.f)({resolver:Object(j.a)(t?q:T),defaultValues:$}),V=(A.reset,A.watch),W=A.control,_=A.setValue,H=A.getValues,B=A.handleSubmit,G=(A.formState.isSubmitting,V()),J=Object(d.useState)(!1),K=Object(r.a)(J,2),M=K[0],Y=K[1],Q=function(){var e=Object(a.a)(s.a.mark((function e(){var a,r,c,i,o,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y(!0),a=new FormData,r=new FormData,c=new FormData,!1,i=!1,o=!1,G.coverImage instanceof Object&&(r.append("coverImage",G.coverImage),i=!0),G.video instanceof Object&&(a.append("video",G.video),!0),G.subImages[0]instanceof Object&&(G.subImages.forEach((function(e){c.append("subImages",e)})),o=!0),c.append("subImages",G.subImages),G.video="",G.coverImage="",G.subImages=[],t&&(G._id=n._id),e.next=18,C.a.post("/api/product/upload",G);case 18:if(u=e.sent,!(l=u.data.product)){e.next=31;break}if(!i){e.next=26;break}return r.append("product",l),e.next=25,C.a.post("/api/product/upload/coverImage",r);case 25:u=e.sent;case 26:if(!o){e.next=31;break}return c.append("product",l),e.next=30,C.a.post("/api/product/upload/subImages",c);case 30:u=e.sent;case 31:Y(!1),E(t?"Update progress is successed!":"Create progress is successed!"),L(w.a.profile.product),e.next=40;break;case 36:e.prev=36,e.t0=e.catch(0),console.error(e.t0),Y(!1);case 40:case"end":return e.stop()}}),e,null,[[0,36]])})));return function(){return e.apply(this,arguments)}}(),X=Object(d.useCallback)((function(e){var t=e[0];t&&_("coverImage",Object.assign(t,{preview:URL.createObjectURL(t)}))}),[_]),Z=Object(d.useCallback)((function(e){_("subImages",e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[_]),ee=Object(d.useState)([{group:"",classify:[]}]),te=Object(r.a)(ee,2),ne=te[0],ae=te[1],re=[];return Object(d.useEffect)((function(){var e={group:""};p.forEach((function(t,n){t.group!==e.group?(e=t,re.push({group:t.group,classify:[{value:t.classify,key:t.key}]})):re.forEach((function(e,n){e.group===t.group&&e.classify.push({value:t.classify,key:t.key})}))})),re.length>0&&ae(re)}),[]),Object(R.jsxs)(R.Fragment,{children:[M&&Object(R.jsx)(U,{}),Object(R.jsx)(I.a,{methods:A,onSubmit:B(Q),children:Object(R.jsxs)(g.a,{container:!0,spacing:3,children:[Object(R.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(R.jsxs)(O.a,{sx:{p:3},children:[Object(R.jsxs)(x.a,{spacing:3,children:[Object(R.jsx)(I.h,{name:"name",label:"Product Name"}),Object(R.jsxs)("div",{children:[Object(R.jsx)(N,{children:"Description"}),Object(R.jsx)(I.c,{simple:!0,name:"description"})]})]}),Object(R.jsxs)(x.a,{spacing:3,children:[Object(R.jsxs)("div",{children:[Object(R.jsx)(N,{children:"Description Video"}),Object(R.jsx)(I.l,{name:"video",showPreview:!0,accept:"video/*",maxSize:3145728,onDrop:X})]}),Object(R.jsxs)("div",{children:[Object(R.jsx)(N,{children:"Cover Image"}),Object(R.jsx)(I.l,{name:"coverImage",showPreview:!0,accept:"image/*",maxSize:3145728,onDrop:X})]}),Object(R.jsxs)("div",{children:[Object(R.jsx)(N,{children:"Sub Images"}),Object(R.jsx)(I.k,{name:"subImages",showPreview:!0,accept:"image/*",maxSize:3145728,onDrop:Z,onRemove:function(e){var t,n=null===(t=G.subImages)||void 0===t?void 0:t.filter((function(t){return t!==e}));_("subImages",n)},onRemoveAll:function(){_("subImages",[])}})]})]})]})}),Object(R.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(R.jsxs)(x.a,{spacing:3,children:[Object(R.jsxs)(O.a,{sx:{p:3},children:[Object(R.jsx)(I.g,{name:"inStock",label:"In stock"}),Object(R.jsxs)(x.a,{spacing:3,mt:2,children:[Object(R.jsx)(I.h,{name:"code",label:"Product Code"}),Object(R.jsx)(I.h,{name:"sku",label:"Product SKU"}),Object(R.jsxs)("div",{children:[Object(R.jsx)(N,{children:"Gender"}),Object(R.jsx)(I.e,{name:"gender",options:F,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),Object(R.jsx)(I.f,{name:"category",label:"HHU Category",children:ne.length>0&&ne.map((function(e){return Object(R.jsx)("optgroup",{label:e.group,children:e.classify.map((function(e){return Object(R.jsx)("option",{value:e.key,children:e.value},e.key)}))},e.group)}))}),Object(R.jsxs)(I.f,{name:"userCategory",label:"User Store Category",children:[Object(R.jsx)("option",{value:"",children:"\xa0"},""),h.length>0&&h.map((function(e){return Object(R.jsx)("option",{value:e.classify,children:e.classify},e.key)}))]}),Object(R.jsx)(b.a,{name:"tags",control:W,render:function(e){var t=e.field;return Object(R.jsx)(v.a,Object(c.a)(Object(c.a)({},t),{},{multiple:!0,freeSolo:!0,onChange:function(e,n){return t.onChange(n)},options:P.map((function(e){return e.name})),renderTags:function(e,t){return e.map((function(e,n){return Object(d.createElement)(f.a,Object(c.a)(Object(c.a)({},t({index:n})),{},{key:e,size:"small",label:e}))}))},renderInput:function(e){return Object(R.jsx)(k.a,Object(c.a)({label:"Tags"},e))}}))}})]})]}),Object(R.jsxs)(O.a,{sx:{p:3},children:[Object(R.jsxs)(x.a,{spacing:3,mb:2,children:[Object(R.jsx)(I.h,{name:"price",label:"Regular Price",placeholder:"0.00",value:0===H("price")?"":H("price"),onChange:function(e){return _("price",Number(e.target.value))},InputLabelProps:{shrink:!0},InputProps:{startAdornment:Object(R.jsx)(y.a,{position:"start",children:"$"}),type:"number"}}),Object(R.jsx)(I.h,{name:"priceSale",label:"Sale Price",placeholder:"0.00",value:0===H("priceSale")?"":H("priceSale"),onChange:function(e){return _("priceSale",Number(e.target.value))},InputLabelProps:{shrink:!0},InputProps:{startAdornment:Object(R.jsx)(y.a,{position:"start",children:"$"}),type:"number"}})]}),Object(R.jsx)(I.g,{name:"taxes",label:"Price includes taxes"})]}),Object(R.jsx)(O.a,{sx:{p:3},children:Object(R.jsxs)(x.a,{spacing:3,mb:2,children:[Object(R.jsx)(I.g,{name:"state",label:"Active this Product"}),Object(R.jsx)(b.a,{name:"sizes",control:W,render:function(e){var t=e.field;return Object(R.jsx)(v.a,Object(c.a)(Object(c.a)({},t),{},{multiple:!0,freeSolo:!0,onChange:function(e,n){return t.onChange(n)},options:z.map((function(e){return e.name})),renderTags:function(e,t){return e.map((function(e,n){return Object(d.createElement)(f.a,Object(c.a)(Object(c.a)({},t({index:n})),{},{key:e,size:"small",label:e}))}))},renderInput:function(e){return Object(R.jsx)(k.a,Object(c.a)({label:"Size Of Product"},e))}}))}}),Object(R.jsx)(I.h,{name:"weight",label:"Weight of Product",placeholder:"0.00",value:0===H("weight")?"":H("weight"),onChange:function(e){return _("weight",Number(e.target.value))},InputLabelProps:{shrink:!0},InputProps:{startAdornment:Object(R.jsx)(y.a,{position:"start",children:"Kg"}),type:"number"}}),Object(R.jsx)(I.g,{name:"colors",label:"Product contains other colors"})]})}),Object(R.jsx)(m.a,{type:"submit",variant:"contained",size:"large",loading:M,children:t?"Save Changes":"Create Product"})]})})]})})]})}},2055:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var a=n(1),r=n(1433),c=n(36),i=n(1298),s=n(19),o=n(426),u=n(24),l=n(63),d=n(420),b=n(1321),j=n(1508),p=n(0);function m(){var e=Object(l.a)().themeStretch,t=Object(s.d)(),n=Object(c.f)().pathname,m=Object(c.h)().name,h=Object(s.e)((function(e){return e.product})).products,g=n.includes("edit"),O=h.find((function(e){return Object(r.a)(e.name)===m}));return Object(a.useEffect)((function(){t(Object(o.k)())}),[t]),Object(p.jsx)(d.a,{title:"Ecommerce: Create a new product",children:Object(p.jsxs)(i.a,{maxWidth:!e&&"lg",children:[Object(p.jsx)(b.a,{heading:g?"Edit product":"Create a new product",links:[{name:"Dashboard",href:u.c.root},{name:"E-Commerce",href:u.c.eCommerce.root},{name:g?m:"New product"}]}),Object(p.jsx)(j.a,{isEdit:g,currentProduct:O})]})})}}}]);
//# sourceMappingURL=41.432725f6.chunk.js.map